<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæ—¥å¿«ä¹ç¥ç¦é¡µé¢</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .birthday-card {
            background: white;
            border-radius: 24px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
        }
        
        h1 {
            color: #ff4081;
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .birthday-person {
            font-size: 1.8rem;
            color: #ff6b6b;
            background: linear-gradient(to right, #ff6b6b, #ff8e53);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .message-box {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
            text-align: left;
            border-left: 5px solid #ff4081;
        }
        
        .message-box p {
            line-height: 1.6;
            color: #555;
            font-size: 1.1rem;
        }
        
        .cake {
            font-size: 4rem;
            margin: 20px 0;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        .balloon {
            position: absolute;
            width: 40px;
            height: 50px;
            background: #ff4081;
            border-radius: 50%;
            z-index: -1;
            animation: float 8s ease-in infinite;
        }
        
        .balloon:nth-child(2) {
            background: #36d1dc;
            left: 10%;
            animation-delay: 1s;
        }
        
        .balloon:nth-child(3) {
            background: #5b86e5;
            right: 15%;
            animation-delay: 2s;
        }
        
        .balloon:nth-child(4) {
            background: #ff9966;
            left: 20%;
            animation-delay: 3s;
        }
        
        @keyframes float {
            0% { transform: translateY(100vh) scale(0.8); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) scale(1.1); opacity: 0; }
        }
        
        .controls {
            margin: 25px 0;
        }
        
        .btn {
            background: linear-gradient(45deg, #ff4081, #ff6b6b);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            margin: 10px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(255, 64, 129, 0.3);
            transition: transform 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-3px);
        }
        
        .share-info {
            background: #f0f8ff;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            font-size: 0.9rem;
            color: #666;
        }
        
        .footer {
            margin-top: 25px;
            color: #888;
            font-size: 0.9rem;
        }
        
        .heart {
            color: #ff4081;
            animation: heartbeat 1.5s infinite;
            display: inline-block;
        }
        
        @keyframes heartbeat {
            0% { transform: scale(1); }
            5% { transform: scale(1.3); }
            10% { transform: scale(1.1); }
            15% { transform: scale(1.4); }
            50% { transform: scale(1); }
            100% { transform: scale(1); }
        }
        
        @media (max-width: 480px) {
            h1 { font-size: 2rem; }
            .birthday-person { font-size: 1.5rem; }
            .cake { font-size: 3rem; }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/confetti-js@0.0.18/dist/index.min.js"></script>
</head>
<body>
    <!-- æ°”çƒèƒŒæ™¯ -->
    <div class="balloon"></div>
    <div class="balloon"></div>
    <div class="balloon"></div>
    <div class="balloon"></div>
    
    <div class="birthday-card">
        <h1>ğŸ‚ ç”Ÿæ—¥å¿«ä¹ï¼ ğŸ‰</h1>
        <div class="birthday-person" id="birthdayName">äº²çˆ±çš„æœ‹å‹</div>
        
        <div class="cake">ğŸ‚</div>
        
        <div class="message-box">
            <p id="message">
                åœ¨è¿™ç‰¹åˆ«çš„æ—¥å­é‡Œï¼Œæ„¿æ‰€æœ‰çš„å¿«ä¹ã€æ‰€æœ‰çš„å¹¸ç¦ã€æ‰€æœ‰çš„æ¸©é¦¨ã€æ‰€æœ‰çš„å¥½è¿éƒ½å›´ç»•åœ¨ä½ èº«è¾¹ã€‚ç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼Œå¥åº·å¹¸ç¦ï¼
            </p>
        </div>
        
        <div class="controls">
            <button class="btn" id="confettiBtn">ğŸ‰ æ”¾é£æ°”çƒ</button>
            <button class="btn" id="musicBtn">ğŸµ ç”Ÿæ—¥éŸ³ä¹</button>
        </div>
        
        <div class="share-info">
            <p>ğŸ’¡ <strong>åˆ†äº«æç¤ºï¼š</strong>å°†æ­¤é¡µé¢é“¾æ¥å‘é€ç»™æœ‹å‹å³å¯æŸ¥çœ‹ç¥ç¦ï¼</p>
            <p style="margin-top: 8px; font-size: 0.85rem;">å¦‚éœ€ä¸ªæ€§åŒ–ç¥ç¦ï¼Œå¯åœ¨é“¾æ¥åæ·»åŠ  ?name=åå­—</p>
        </div>
        
        <div class="footer">
            <p>ç”¨ <span class="heart">â¤</span> åˆ¶ä½œçš„ç”Ÿæ—¥ç¥ç¦ | Vercel æ‰˜ç®¡</p>
        </div>
    </div>
    
    <audio id="birthdayAudio" preload="auto">
        <!-- éŸ³é¢‘å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
    </audio>
    
    <script>
        // ä»URLè·å–åå­—
        function getUrlParam(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }
        
        // è®¾ç½®åå­—
        const name = getUrlParam('name') || 'äº²çˆ±çš„æœ‹å‹';
        document.getElementById('birthdayName').textContent = name;
        
        // æ›´æ–°ç¥ç¦è¯­
        const messages = [
            `äº²çˆ±çš„${name}ï¼Œç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ çš„ç”Ÿæ´»åƒå½©è™¹ä¸€æ ·ç»šä¸½å¤šå½©ï¼Œæ¯ä¸€å¤©éƒ½å……æ»¡æƒŠå–œå’Œæ¬¢ç¬‘ã€‚`,
            `ç¥${name}ç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ çš„æœªæ¥æ¯”è¿‡å»æ›´åŠ å…‰æ˜ï¼Œæ¯ä¸€æ­¥éƒ½èµ°å‘æˆåŠŸå’Œå¹¸ç¦ã€‚`,
            `${name}ï¼Œåœ¨è¿™ä¸ªç‰¹åˆ«çš„æ—¥å­é‡Œï¼Œæ„¿å¿«ä¹æ°¸è¿œä¼´éšä½ ï¼Œæ„¿å¥åº·å¸¸ä¼´ä½ å·¦å³ï¼`,
            `ç”Ÿæ—¥å¿«ä¹ï¼Œ${name}ï¼æ„¿ä½ çš„æ¯ä¸ªæ„¿æœ›éƒ½èƒ½å®ç°ï¼Œæ„¿ä½ çš„æ¯ä¸€å¤©éƒ½åƒä»Šå¤©ä¸€æ ·ç‰¹åˆ«è€Œç¾å¥½ã€‚`,
            `ç¥ç¦${name}ç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ çš„ç”Ÿæ´»åƒè›‹ç³•ä¸€æ ·ç”œèœœï¼Œåƒèœ¡çƒ›ä¸€æ ·æ˜äº®ï¼`
        ];
        
        const randomMsg = messages[Math.floor(Math.random() * messages.length)];
        document.getElementById('message').textContent = randomMsg;
        
        // å½©å±‘æ•ˆæœ
        const confettiBtn = document.getElementById('confettiBtn');
        let confetti = null;
        
        confettiBtn.addEventListener('click', function() {
            if (!confetti) {
                confetti = new ConfettiGenerator({
                    target: 'confetti-canvas',
                    max: 80,
                    size: 1,
                    animate: true,
                    props: ['circle', 'square', 'triangle', 'line'],
                    colors: [[255, 107, 107], [54, 209, 220], [91, 134, 229], [255, 153, 102]],
                    clock: 25
                });
                confetti.render();
                
                // 5ç§’ååœæ­¢
                setTimeout(() => {
                    confetti.clear();
                    confetti = null;
                }, 5000);
            }
        });
        
        // ç”Ÿæ—¥éŸ³ä¹
        const musicBtn = document.getElementById('musicBtn');
        const audio = document.getElementById('birthdayAudio');
        let isPlaying = false;
        
        // åˆ›å»ºç®€å•çš„ç”Ÿæ—¥éŸ³ä¹
        function createBirthdayTune() {
            const context = new (window.AudioContext || window.webkitAudioContext)();
            const notes = [262, 262, 294, 262, 349, 330];
            const durations = [0.5, 0.5, 1, 1, 1, 2];
            
            let time = context.currentTime;
            
            for (let i = 0; i < notes.length; i++) {
                const oscillator = context.createOscillator();
                const gainNode = context.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(context.destination);
                
                oscillator.frequency.value = notes[i];
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0, time);
                gainNode.gain.linearRampToValueAtTime(0.3, time + 0.05);
                gainNode.gain.exponentialRampToValueAtTime(0.01, time + durations[i]);
                
                oscillator.start(time);
                oscillator.stop(time + durations[i]);
                
                time += durations[i];
            }
            
            // å¾ªç¯æ’­æ”¾
            setTimeout(() => {
                if (isPlaying) {
                    createBirthdayTune();
                }
            }, (time - context.currentTime) * 1000);
        }
        
        musicBtn.addEventListener('click', function() {
            if (!isPlaying) {
                createBirthdayTune();
                musicBtn.textContent = 'â¸ï¸ æš‚åœéŸ³ä¹';
                isPlaying = true;
            } else {
                // å®é™…ä¸Šéœ€è¦æ›´å¤æ‚çš„éŸ³é¢‘æ§åˆ¶ï¼Œè¿™é‡Œç®€åŒ–å¤„ç†
                musicBtn.textContent = 'ğŸµ ç”Ÿæ—¥éŸ³ä¹';
                isPlaying = false;
            }
        });
        
        // åˆ›å»ºéšè—çš„canvasç”¨äºå½©å±‘
        const canvas = document.createElement('canvas');
        canvas.id = 'confetti-canvas';
        canvas.style.position = 'fixed';
        canvas.style.top = '0';
        canvas.style.left = '0';
        canvas.style.width = '100%';
        canvas.style.height = '100%';
        canvas.style.pointerEvents = 'none';
        canvas.style.zIndex = '999';
        document.body.appendChild(canvas);
        
        // è‡ªåŠ¨åˆ›å»ºä¸€äº›æ°”çƒ
        function createAutoBalloon() {
            const balloon = document.createElement('div');
            balloon.className = 'balloon';
            balloon.style.left = Math.random() * 100 + '%';
            balloon.style.background = ['#ff4081', '#36d1dc', '#5b86e5', '#ff9966'][Math.floor(Math.random() * 4)];
            balloon.style.animationDelay = Math.random() * 5 + 's';
            document.body.appendChild(balloon);
            
            setTimeout(() => {
                if (balloon.parentNode) {
                    balloon.parentNode.removeChild(balloon);
                }
            }, 9000);
        }
        
        // æ¯3ç§’åˆ›å»ºä¸€ä¸ªæ°”çƒ
        setInterval(createAutoBalloon, 3000);
        for (let i = 0; i < 3; i++) {
            setTimeout(createAutoBalloon, i * 1000);
        }
        
        // ç‚¹å‡»é¡µé¢ä»»ä½•åœ°æ–¹ä¹Ÿå¯ä»¥è§¦å‘å½©å±‘
        document.addEventListener('click', function(e) {
            if (e.target !== confettiBtn && e.target !== musicBtn) {
                // å¯é€‰ï¼šå°æ¦‚ç‡è§¦å‘å½©å±‘
                if (Math.random() < 0.1) {
                    confettiBtn.click();
                }
            }
        });
        
        console.log('ç”Ÿæ—¥å¿«ä¹é¡µé¢åŠ è½½å®Œæˆï¼ğŸ‰');
    </script>
</body>
</html>